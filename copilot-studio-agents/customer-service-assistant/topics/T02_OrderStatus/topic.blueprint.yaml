# -----------------------------------------------------------------------------
# Topic Blueprint: Order Status
# Agent: Customer Service Assistant
# Purpose: Collect order number and return a clear status with next action
# -----------------------------------------------------------------------------

topic:
  name: OrderStatus
  display_name: Order Status
  description: Collect order number and return a clear status + next action.

  trigger:
    type: OnRecognizedIntent
    intent: OrderStatus
    phrases:
      - where is my order
      - order status
      - track my package
      - has my order shipped
      - delivery date
      - my order hasn't arrived
      - tracking number
      - shipment status
      - when will my order arrive
      - check my delivery
      - where's my package
      - order tracking
    # Note: Aim for 5-15 trigger phrases; keep them short and varied

  variables:
    - name: t_order_number
      type: string
      scope: topic
      description: Order number provided by customer.
    - name: t_status_summary
      type: string
      scope: topic
      description: Short status for the customer.

  flow:
    - node: Question
      id: question_order_number_001
      name: AskOrderNumber
      prompt: Sure. What's your **order number**?
      save_to: t_order_number
      type_hint: Text
      validation:
        required: true

    - node: Action
      id: action_get_status_001
      name: GetOrderStatus
      action_name: GetOrderStatus
      inputs:
        orderNumber: t_order_number
      outputs:
        statusSummary: t_status_summary
      # Note: If you don't want to build a flow yet, replace with a GenerativeAnswers
      # node that gives a *sample* status.

    - node: Message
      id: msg_status_result_001
      name: StatusResult
      text: |
        Here's what I see:

        {t_status_summary}

    - node: Message
      id: msg_zip_offer_001
      name: ZipCodeOffer
      text: If you share your ZIP code, I can sanity-check delivery expectations.

    - node: End
      id: end_topic_001
      name: EndTopic
